<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="https://unpkg.com/d3@5.16.0/dist/d3.min.js"></script>
<script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
<script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>


<div id="graph" style="text-align: center;"></div>
<script>

// This example shows the behavior in version 2.x when a web is used

var graphviz = d3.select("#graph").graphviz({useWorker: true})
    .renderDot('digraph  {a -> b; b->b}')
    .on('initEnd', () => {
        // Never called since it's attached after init is complete
        console.log('Number of nodes after init:', d3.selectAll(".node").size()); // N/A
    })
    .on('end', () => {
        console.log('Number of nodes after render:', d3.selectAll(".node").size()); // 0
    });

console.log('Number of nodes directly after creation:', d3.selectAll(".node").size()); // 2
console.l
</script>
